<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firi Gemta School - Student App</title>
    <style>
        /* Modern Dark Theme */
        :root {
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --primary-light: #8b5cf6;
            --secondary: #06d6a0;
            --accent: #f59e0b;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --dark-bg: #0f172a;
            --dark-card: #1e293b;
            --dark-border: #334155;
            --dark-text: #f1f5f9;
            --dark-text-secondary: #94a3b8;
            --firebase-yellow: #ffcb2b;
            --firebase-orange: #ffa000;
            --firebase-red: #f57c00;
            --firebase-navy: #1a237e;
            --border-radius: 16px;
            --border-radius-sm: 8px;
            --shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient-primary: linear-gradient(135deg, var(--primary), var(--primary-dark));
            --gradient-firebase: linear-gradient(135deg, var(--firebase-orange), var(--firebase-red));
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            background-color: var(--dark-bg);
            color: var(--dark-text);
            line-height: 1.6;
            overflow-x: hidden;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Common Components */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            gap: 8px;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 14px 0 rgba(124, 58, 237, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px 0 rgba(124, 58, 237, 0.6);
        }

        .btn-secondary {
            background: var(--dark-card);
            color: var(--dark-text);
            border: 1px solid var(--dark-border);
        }

        .btn-secondary:hover {
            background: #2d3748;
            border-color: var(--primary-light);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-firebase {
            background: var(--gradient-firebase);
            color: white;
        }

        .card {
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            margin-bottom: 24px;
            transition: var(--transition);
            border: 1px solid var(--dark-border);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-light);
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-content {
            color: var(--dark-text-secondary);
        }

        .icon {
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .icon svg {
            width: 100%;
            height: 100%;
        }

        .hidden {
            display: none !important;
        }

        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Header Styles */
        header {
            background: var(--dark-card);
            color: white;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid var(--dark-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 1.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .logo-icon {
            width: 36px;
            height: 36px;
        }

        .menu-toggle {
            background: none;
            border: none;
            color: var(--dark-text);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
        }

        .menu-toggle:hover {
            background: var(--dark-border);
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: -320px;
            width: 320px;
            height: 100%;
            background: var(--dark-card);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            transition: var(--transition);
            overflow-y: auto;
            padding: 24px;
            border-right: 1px solid var(--dark-border);
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--dark-border);
        }

        .sidebar-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark-text);
            padding: 4px;
            border-radius: var(--border-radius-sm);
            transition: var(--transition);
        }

        .sidebar-close:hover {
            background: var(--dark-border);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 8px;
        }

        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 14px 16px;
            border-radius: var(--border-radius-sm);
            color: var(--dark-text-secondary);
            text-decoration: none;
            transition: var(--transition);
            font-weight: 500;
        }

        .sidebar-nav a:hover, .sidebar-nav a.active {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Main Content */
        main {
            padding: 24px 0;
            min-height: calc(100vh - 140px);
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 24px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Grade Selection */
        .grade-selector {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 12px 0;
            margin-bottom: 24px;
            scrollbar-width: none;
        }

        .grade-selector::-webkit-scrollbar {
            display: none;
        }

        .grade-btn {
            padding: 14px 24px;
            background: var(--dark-card);
            border: 1px solid var(--dark-border);
            border-radius: var(--border-radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            color: var(--dark-text-secondary);
        }

        .grade-btn.active {
            background: var(--gradient-primary);
            color: white;
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        /* Subject Grid */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .subject-card {
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--dark-border);
            position: relative;
            overflow: hidden;
        }

        .subject-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .subject-card:hover::before {
            transform: scaleX(1);
        }

        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .subject-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-primary);
            border-radius: 50%;
            color: white;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .subject-name {
            font-weight: 600;
            color: var(--dark-text);
        }

        /* Content Tabs */
        .content-tabs {
            display: flex;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--dark-border);
        }

        .content-tab {
            padding: 14px 24px;
            background: none;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 3px solid transparent;
            color: var(--dark-text-secondary);
            position: relative;
        }

        .content-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .content-tab::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 0;
            height: 3px;
            background: var(--primary);
            transition: width 0.3s;
        }

        .content-tab:hover::after {
            width: 100%;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        /* Notes and Quizzes Grid */
        .notes-container, .quizzes-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .note-card, .quiz-card {
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 24px;
            cursor: pointer;
            transition: var(--transition);
            border: 1px solid var(--dark-border);
            position: relative;
            overflow: hidden;
        }

        .note-card::before, .quiz-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .note-card:hover::before, .quiz-card:hover::before {
            transform: scaleX(1);
        }

        .note-card:hover, .quiz-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .note-title, .quiz-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .note-preview, .quiz-preview {
            color: var(--dark-text-secondary);
            font-size: 0.9rem;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        /* Quiz Interface */
        .quiz-interface {
            max-width: 700px;
            margin: 0 auto;
        }

        .quiz-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .progress-bar {
            height: 8px;
            background: var(--dark-border);
            border-radius: 4px;
            flex-grow: 1;
            margin: 0 16px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            width: 0%;
            transition: width 0.5s ease;
        }

        .quiz-question {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 24px;
            color: var(--dark-text);
            line-height: 1.4;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 32px;
        }

        .quiz-option {
            padding: 16px 20px;
            background: var(--dark-card);
            border: 2px solid var(--dark-border);
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .quiz-option:hover {
            border-color: var(--primary-light);
            background: rgba(124, 58, 237, 0.1);
        }

        .quiz-option.selected {
            border-color: var(--primary);
            background: rgba(124, 58, 237, 0.2);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.2);
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.2);
        }

        .quiz-feedback {
            padding: 16px;
            border-radius: var(--border-radius-sm);
            margin-bottom: 24px;
            text-align: center;
            font-weight: 600;
            display: none;
            border-left: 4px solid;
        }

        .quiz-feedback.correct {
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
            display: block;
            border-left-color: var(--success);
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            color: var(--danger);
            display: block;
            border-left-color: var(--danger);
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
        }

        /* Note Reading Interface */
        .note-reading {
            max-width: 800px;
            margin: 0 auto;
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--dark-border);
        }

        .note-title-large {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark-text);
        }

        .note-content {
            line-height: 1.8;
            font-size: 1.1rem;
            color: var(--dark-text-secondary);
        }

        .keyword {
            background: var(--firebase-yellow);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: var(--firebase-navy);
        }

        /* Settings Page */
        .settings-section {
            margin-bottom: 32px;
        }

        .settings-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-text);
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            background: var(--dark-card);
            border: 1px solid var(--dark-border);
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            transition: var(--transition);
            color: var(--dark-text);
        }

        .form-control:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.2);
        }

        textarea.form-control {
            min-height: 140px;
            resize: vertical;
        }

        .creator-info {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            border: 1px solid var(--dark-border);
        }

        .creator-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 2rem;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
        }

        .creator-details h3 {
            margin-bottom: 8px;
            color: var(--dark-text);
            font-size: 1.4rem;
        }

        .creator-details p {
            color: var(--dark-text-secondary);
            margin-bottom: 4px;
        }

        /* Video Tutorials */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 24px;
        }

        .video-card {
            background: var(--dark-card);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--dark-border);
        }

        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .video-thumbnail {
            width: 100%;
            height: 180px;
            background: var(--gradient-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }

        .video-info {
            padding: 20px;
        }

        .video-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--dark-text);
        }

        .video-description {
            color: var(--dark-text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 16px 24px;
            background: var(--dark-card);
            color: var(--dark-text);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            border-left: 4px solid var(--success);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .subject-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .notes-container, .quizzes-container {
                grid-template-columns: 1fr;
            }
            
            .video-grid {
                grid-template-columns: 1fr;
            }
            
            .creator-info {
                flex-direction: column;
                text-align: center;
            }
            
            .sidebar {
                width: 280px;
            }
        }

        @media (max-width: 576px) {
            .grade-selector {
                padding: 8px 0;
            }
            
            .grade-btn {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
            
            .content-tab {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
            
            .card {
                padding: 20px;
            }
            
            .quiz-progress {
                flex-direction: column;
                gap: 12px;
            }
            
            .progress-bar {
                width: 100%;
                margin: 0;
            }
        }
    </style>
    <!-- Include Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <!-- Student App Interface -->
    <div id="studentApp" class="app-interface">
        <header>
            <div class="container">
                <div class="header-content">
                    <div class="logo">
                        <div class="logo-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L1 9L5 13M12 2L23 9L19 13M12 2V22M5 13V20L12 22M5 13L12 17M19 13V20L12 22M19 13L12 17M12 17V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        Firi Gemta School
                    </div>
                    <button class="menu-toggle" id="menuToggle">
                        <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="3" y1="12" x2="21" y2="12"></line>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <line x1="3" y1="18" x2="21" y2="18"></line>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3>Menu</h3>
                <button class="sidebar-close" id="sidebarClose">
                    <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <ul class="sidebar-nav">
                <li><a href="#" class="nav-link active" data-page="home">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    Home
                </a></li>
                <li><a href="#" class="nav-link" data-page="settings">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M19.4 15C19.2662 15.3068 19.199 15.6375 19.2 16C19.2 16.3625 19.2662 16.6932 19.4 17C19.4833 17.175 19.6 17.3333 19.7333 17.4667C19.8667 17.6 20.025 17.7167 20.2 17.8C20.5068 17.9338 20.8375 18 21.2 18C21.5625 18 21.8932 17.9338 22.2 17.8C22.375 17.7167 22.5333 17.6 22.6667 17.4667C22.8 17.3333 22.9167 17.175 23 17C23.1338 16.6932 23.2 16.3625 23.2 16C23.2 15.6375 23.1338 15.3068 23 15C22.9167 14.825 22.8 14.6667 22.6667 14.5333C22.5333 14.4 22.375 14.2833 22.2 14.2C21.8932 14.0662 21.5625 14 21.2 14C20.8375 14 20.5068 14.0662 20.2 14.2C20.025 14.2833 19.8667 14.4 19.7333 14.5333C19.6 14.6667 19.4833 14.825 19.4 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M1 15V17H4L6 20L8 17H11V15H8L6 12L4 15H1Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    Settings
                </a></li>
                <li><a href="#" class="nav-link" data-page="tutorials">
                    <div class="icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M23 7L16 12L23 17V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14 5H3C1.89543 5 1 5.89543 1 7V17C1 18.1046 1.89543 19 3 19H14C15.1046 19 16 18.1046 16 17V7C16 5.89543 15.1046 5 14 5Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    Video Tutorials
                </a></li>
            </ul>
        </div>

        <div class="overlay" id="overlay"></div>

        <main>
            <div class="container">
                <!-- Home Page -->
                <div id="homePage" class="page active">
                    <div class="grade-selector">
                        <button class="grade-btn active" data-grade="9">Grade 9</button>
                        <button class="grade-btn" data-grade="10">Grade 10</button>
                        <button class="grade-btn" data-grade="11">Grade 11</button>
                        <button class="grade-btn" data-grade="12">Grade 12</button>
                    </div>

                    <div id="subjectSelection" class="subject-selection">
                        <h2 class="section-title">Select a Subject</h2>
                        <div class="subject-grid">
                            <div class="subject-card" data-subject="math">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 12H15M9 16H15M9 20H15M5 4H19C20.1046 4 21 4.89543 21 6V18C21 19.1046 20.1046 20 19 20H5C3.89543 20 3 19.1046 3 18V6C3 4.89543 3.89543 4 5 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Math</div>
                            </div>
                            <div class="subject-card" data-subject="english">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 20H5C3.89543 20 3 19.1046 3 18V6C3 4.89543 3.89543 4 5 4H19C20.1046 4 21 4.89543 21 6V10M7 8H17M7 12H13M15 19L18 22L23 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">English</div>
                            </div>
                            <div class="subject-card" data-subject="physics">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 2V4M12 20V22M4 12H2M6.31412 6.31412L4.8999 4.8999M17.6858 17.6858L19.1 19.1M6.31412 17.6858L4.8999 19.1M17.6858 6.31412L19.1 4.8999M22 12H20M16 12C16 14.2091 14.2091 16 12 16C9.79086 16 8 14.2091 8 12C8 9.79086 9.79086 8 12 8C14.2091 8 16 9.79086 16 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Physics</div>
                            </div>
                            <div class="subject-card" data-subject="chemistry">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 21H15M12 3V21M17 3H7C5.89543 3 5 3.89543 5 5V7C5 8.10457 5.89543 9 7 9H17C18.1046 9 19 8.10457 19 7V5C19 3.89543 18.1046 3 17 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Chemistry</div>
                            </div>
                            <div class="subject-card" data-subject="biology">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 14C8 14 9.5 16 12 16C14.5 16 16 14 16 14M15 9H15.01M9 9H9.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Biology</div>
                            </div>
                            <div class="subject-card" data-subject="geography">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M9 11L12 14L22 4M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C12.8622 3 13.6989 3.11633 14.5 3.33782M21 3L12 12L9 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Geography</div>
                            </div>
                            <div class="subject-card" data-subject="history">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">History</div>
                            </div>
                            <div class="subject-card" data-subject="economics">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 1V23M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">Economics</div>
                            </div>
                            <div class="subject-card" data-subject="it">
                                <div class="subject-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M4 7C4 6.46957 4.21071 5.96086 4.58579 5.58579C4.96086 5.21071 5.46957 5 6 5H18C18.5304 5 19.0391 5.21071 19.4142 5.58579C19.7893 5.96086 20 6.46957 20 7V17C20 17.5304 19.7893 18.0391 19.4142 18.4142C19.0391 18.7893 18.5304 19 18 19H6C5.46957 19 4.96086 18.7893 4.58579 18.4142C4.21071 18.0391 4 17.5304 4 17V7Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M8 7V5H6C5.46957 5 4.96086 5.21071 4.58579 5.58579C4.21071 5.96086 4 6.46957 4 7H8ZM8 7V9M16 7V5H18C18.5304 5 19.0391 5.21071 19.4142 5.58579C19.7893 5.96086 20 6.46957 20 7H16ZM16 7V9M8 15H16M8 11H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="subject-name">IT</div>
                            </div>
                        </div>
                    </div>

                    <div id="subjectContent" class="subject-content hidden">
                        <div class="content-header">
                            <button id="backToSubjects" class="btn btn-secondary">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                Back to Subjects
                            </button>
                            <h2 id="currentSubject" class="section-title">Math</h2>
                        </div>

                        <div class="content-tabs">
                            <button class="content-tab active" data-tab="notes">Notes</button>
                            <button class="content-tab" data-tab="quizzes">Quizzes</button>
                        </div>

                        <div class="content-sections">
                            <div id="notesSection" class="content-section active">
                                <div class="notes-container" id="notesContainer">
                                    <div class="loading-container" style="text-align: center; padding: 40px;">
                                        <div class="loading"></div>
                                        <p style="margin-top: 16px;">Loading notes from Firebase...</p>
                                    </div>
                                </div>
                            </div>

                            <div id="quizzesSection" class="content-section">
                                <div class="quizzes-container" id="quizzesContainer">
                                    <div class="loading-container" style="text-align: center; padding: 40px;">
                                        <div class="loading"></div>
                                        <p style="margin-top: 16px;">Loading quizzes from Firebase...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settingsPage" class="page">
                    <h2 class="section-title">Settings</h2>
                    
                    <div class="settings-section">
                        <h3 class="settings-title">Contact Teachers</h3>
                        <div class="card">
                            <div class="form-group">
                                <label class="form-label" for="messageSubject">Subject</label>
                                <select class="form-control" id="messageSubject">
                                    <option value="">Select a subject</option>
                                    <option value="math">Math</option>
                                    <option value="english">English</option>
                                    <option value="physics">Physics</option>
                                    <option value="chemistry">Chemistry</option>
                                    <option value="biology">Biology</option>
                                    <option value="geography">Geography</option>
                                    <option value="history">History</option>
                                    <option value="economics">Economics</option>
                                    <option value="it">IT</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="messageContent">Your Question or Message</label>
                                <textarea class="form-control" id="messageContent" placeholder="Type your question or message here..."></textarea>
                            </div>
                            <button class="btn btn-primary" id="sendMessage">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                Send Message to Firebase
                            </button>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3 class="settings-title">About the Creator</h3>
                        <div class="creator-info">
                            <div class="creator-avatar">HA</div>
                            <div class="creator-details">
                                <h3>Hanif Awol</h3>
                                <p>Age: 15, Grade: 10</p>
                                <p>Student & App Developer</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Video Tutorials Page -->
                <div id="tutorialsPage" class="page">
                    <h2 class="section-title">Video Tutorials</h2>
                    
                    <div class="video-grid">
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">How to Use the Student App</h3>
                                <p class="video-description">Learn how to navigate the app, select subjects, and access notes and quizzes.</p>
                            </div>
                        </div>
                        
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Taking Quizzes Effectively</h3>
                                <p class="video-description">Tips and strategies for answering quiz questions and understanding feedback.</p>
                            </div>
                        </div>
                        
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Using Notes for Study</h3>
                                <p class="video-description">How to effectively use the digital notes for your studies and revision.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Note Reading Page -->
                <div id="noteReadingPage" class="page">
                    <div class="note-reading">
                        <div class="note-header">
                            <button id="backToSubjectContent" class="btn btn-secondary">
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                Back
                            </button>
                            <h2 class="note-title-large" id="noteTitle">Note Title</h2>
                        </div>
                        <div class="note-content" id="noteContent">
                            <!-- Note content will be populated here from Firebase -->
                        </div>
                    </div>
                </div>

                <!-- Quiz Interface -->
                <div id="quizInterface" class="page">
                    <div class="quiz-interface">
                        <div class="quiz-progress">
                            <span id="currentQuestionNumber">1</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="quizProgress"></div>
                            </div>
                            <span id="totalQuestions">10</span>
                        </div>

                        <div class="quiz-question" id="quizQuestion">
                            <!-- Question will be populated here from Firebase -->
                        </div>

                        <div class="quiz-options" id="quizOptions">
                            <!-- Options will be populated here from Firebase -->
                        </div>

                        <div class="quiz-feedback" id="quizFeedback">
                            <!-- Feedback will be shown here -->
                        </div>

                        <div class="quiz-navigation">
                            <button class="btn btn-secondary" id="prevQuestion" disabled>
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                Previous
                            </button>
                            <button class="btn btn-primary" id="nextQuestion">
                                Next
                                <div class="icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="container">
                <p>&copy; 2023 Firi Gemta School. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="icon">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
        <span id="toastMessage">Operation completed successfully!</span>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCayGcfnpCAGNDph3YTyEA9_KDdD2C5Fg0",
            authDomain: "my-tiktok-cbd6f.firebaseapp.com",
            databaseURL: "https://my-tiktok-cbd6f-default-rtdb.firebaseio.com",
            projectId: "my-tiktok-cbd6f",
            storageBucket: "my-tiktok-cbd6f.appspot.com",
            messagingSenderId: "964441294320",
            appId: "1:964441294320:web:4c8da74a0cee8ed2644935",
            measurementId: "G-RYBWW6XB10"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // App State
        let currentGrade = '9';
        let currentSubject = '';
        let currentPage = 'home';
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let selectedAnswer = null;
        let quizScore = 0;
        let currentNote = null;

        // DOM Elements
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        
        // Student App Elements
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const sidebarClose = document.getElementById('sidebarClose');
        const overlay = document.getElementById('overlay');
        const navLinks = document.querySelectorAll('.nav-link');
        const gradeBtns = document.querySelectorAll('.grade-btn');
        const subjectCards = document.querySelectorAll('.subject-card');
        const backToSubjects = document.getElementById('backToSubjects');
        const subjectSelection = document.getElementById('subjectSelection');
        const subjectContent = document.getElementById('subjectContent');
        const currentSubjectElement = document.getElementById('currentSubject');
        const contentTabs = document.querySelectorAll('.content-tab');
        const notesSection = document.getElementById('notesSection');
        const quizzesSection = document.getElementById('quizzesSection');
        const notesContainer = document.getElementById('notesContainer');
        const quizzesContainer = document.getElementById('quizzesContainer');
        const noteReadingPage = document.getElementById('noteReadingPage');
        const noteTitle = document.getElementById('noteTitle');
        const noteContent = document.getElementById('noteContent');
        const backToSubjectContent = document.getElementById('backToSubjectContent');
        const quizInterface = document.getElementById('quizInterface');
        const quizQuestion = document.getElementById('quizQuestion');
        const quizOptions = document.getElementById('quizOptions');
        const quizFeedback = document.getElementById('quizFeedback');
        const currentQuestionNumber = document.getElementById('currentQuestionNumber');
        const totalQuestions = document.getElementById('totalQuestions');
        const quizProgress = document.getElementById('quizProgress');
        const prevQuestion = document.getElementById('prevQuestion');
        const nextQuestion = document.getElementById('nextQuestion');
        const sendMessage = document.getElementById('sendMessage');

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupEventListeners();
        }

        function setupEventListeners() {
            // Sidebar toggle
            menuToggle.addEventListener('click', toggleSidebar);
            sidebarClose.addEventListener('click', toggleSidebar);
            overlay.addEventListener('click', toggleSidebar);
            
            // Navigation
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    navigateToPage(page);
                });
            });
            
            // Grade selection
            gradeBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const grade = this.getAttribute('data-grade');
                    selectGrade(grade);
                });
            });
            
            // Subject selection
            subjectCards.forEach(card => {
                card.addEventListener('click', function() {
                    const subject = this.getAttribute('data-subject');
                    selectSubject(subject);
                });
            });
            
            // Back to subjects
            backToSubjects.addEventListener('click', function() {
                subjectSelection.classList.remove('hidden');
                subjectContent.classList.add('hidden');
            });
            
            // Content tabs
            contentTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchContentTab(tabName);
                });
            });
            
            // Back from note reading
            backToSubjectContent.addEventListener('click', function() {
                noteReadingPage.classList.remove('active');
                subjectContent.classList.add('active');
            });
            
            // Quiz navigation
            prevQuestion.addEventListener('click', goToPreviousQuestion);
            nextQuestion.addEventListener('click', goToNextQuestion);
            
            // Send message
            sendMessage.addEventListener('click', sendStudentMessage);
        }

        // Utility Functions
        function showToast(message, type = 'success') {
            toastMessage.textContent = message;
            toast.className = 'toast';
            
            if (type === 'error') {
                toast.classList.add('error');
            } else if (type === 'warning') {
                toast.classList.add('warning');
            }
            
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Student App Functions
        function toggleSidebar() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function navigateToPage(page) {
            // Update active nav link
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-page') === page) {
                    link.classList.add('active');
                }
            });
            
            // Hide all pages
            document.querySelectorAll('.page').forEach(pageEl => {
                pageEl.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(page + 'Page').classList.add('active');
            
            // Close sidebar
            toggleSidebar();
            
            // Update current page
            currentPage = page;
        }

        function selectGrade(grade) {
            // Update active grade button
            gradeBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-grade') === grade) {
                    btn.classList.add('active');
                }
            });
            
            // Update current grade
            currentGrade = grade;
            
            // Reload content if we're on a subject page
            if (currentSubject) {
                loadSubjectContent(currentSubject);
            }
        }

        function selectSubject(subject) {
            // Update current subject
            currentSubject = subject;
            
            // Update UI
            subjectSelection.classList.add('hidden');
            subjectContent.classList.remove('hidden');
            currentSubjectElement.textContent = getSubjectName(subject);
            
            // Load notes and quizzes for this subject from Firebase
            loadSubjectContent(subject);
        }

        function getSubjectName(subjectKey) {
            const subjectNames = {
                math: "Mathematics",
                english: "English",
                physics: "Physics",
                chemistry: "Chemistry",
                biology: "Biology",
                geography: "Geography",
                history: "History",
                economics: "Economics",
                it: "Information Technology"
            };
            
            return subjectNames[subjectKey] || subjectKey;
        }

        function switchContentTab(tabName) {
            // Update active tab
            contentTabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            // Show selected content section
            notesSection.classList.remove('active');
            quizzesSection.classList.remove('active');
            
            if (tabName === 'notes') {
                notesSection.classList.add('active');
            } else if (tabName === 'quizzes') {
                quizzesSection.classList.add('active');
            }
        }

        // Firebase Functions
        async function loadSubjectContent(subject) {
            // Show loading state
            notesContainer.innerHTML = `
                <div class="loading-container" style="text-align: center; padding: 40px;">
                    <div class="loading"></div>
                    <p style="margin-top: 16px;">Loading notes from Firebase...</p>
                </div>
            `;
            
            quizzesContainer.innerHTML = `
                <div class="loading-container" style="text-align: center; padding: 40px;">
                    <div class="loading"></div>
                    <p style="margin-top: 16px;">Loading quizzes from Firebase...</p>
                </div>
            `;

            try {
                // Load notes from Firebase
                const notesSnapshot = await database.ref('content/notes').once('value');
                const notesData = notesSnapshot.val();
                
                // Load quizzes from Firebase
                const quizzesSnapshot = await database.ref('content/quizzes').once('value');
                const quizzesData = quizzesSnapshot.val();
                
                // Filter and display notes for current subject and grade
                displayNotes(notesData, subject);
                
                // Filter and display quizzes for current subject and grade
                displayQuizzes(quizzesData, subject);
                
            } catch (error) {
                console.error('Error loading content from Firebase:', error);
                showToast('Error loading content from Firebase', 'error');
                
                notesContainer.innerHTML = '<p>Error loading notes. Please try again.</p>';
                quizzesContainer.innerHTML = '<p>Error loading quizzes. Please try again.</p>';
            }
        }

        function displayNotes(notesData, subject) {
            notesContainer.innerHTML = '';
            
            if (!notesData) {
                notesContainer.innerHTML = '<p>No notes available for this subject.</p>';
                return;
            }
            
            let hasNotes = false;
            
            Object.keys(notesData).forEach(key => {
                const note = notesData[key];
                
                // Filter by subject and grade
                if (note.subject === subject && note.grade === currentGrade) {
                    hasNotes = true;
                    const noteElement = createNoteCard(note, key);
                    notesContainer.appendChild(noteElement);
                }
            });
            
            if (!hasNotes) {
                notesContainer.innerHTML = '<p>No notes available for this subject and grade.</p>';
            }
        }

        function displayQuizzes(quizzesData, subject) {
            quizzesContainer.innerHTML = '';
            
            if (!quizzesData) {
                quizzesContainer.innerHTML = '<p>No quizzes available for this subject.</p>';
                return;
            }
            
            let hasQuizzes = false;
            
            Object.keys(quizzesData).forEach(key => {
                const quiz = quizzesData[key];
                
                // Filter by subject and grade
                if (quiz.subject === subject && quiz.grade === currentGrade) {
                    hasQuizzes = true;
                    const quizElement = createQuizCard(quiz, key);
                    quizzesContainer.appendChild(quizElement);
                }
            });
            
            if (!hasQuizzes) {
                quizzesContainer.innerHTML = '<p>No quizzes available for this subject and grade.</p>';
            }
        }

        function createNoteCard(note, noteId) {
            const card = document.createElement('div');
            card.className = 'note-card';
            card.innerHTML = `
                <h3 class="note-title">${note.title}</h3>
                <p class="note-preview">${note.content ? (note.content.substring(0, 100) + '...') : 'No content available'}</p>
                <div style="font-size: 0.8rem; color: var(--dark-text-secondary); margin-top: 8px;">
                    Posted: ${new Date(note.createdAt).toLocaleDateString()}
                </div>
            `;
            
            card.addEventListener('click', function() {
                openNote(note);
            });
            
            return card;
        }

        function createQuizCard(quiz, quizId) {
            const card = document.createElement('div');
            card.className = 'quiz-card';
            card.innerHTML = `
                <h3 class="quiz-title">${quiz.title}</h3>
                <p class="quiz-preview">${quiz.questions ? quiz.questions.length : 0} questions</p>
                <div style="font-size: 0.8rem; color: var(--dark-text-secondary); margin-top: 8px;">
                    Posted: ${new Date(quiz.createdAt).toLocaleDateString()}
                </div>
            `;
            
            card.addEventListener('click', function() {
                startQuiz(quiz);
            });
            
            return card;
        }

        function openNote(note) {
            // Store current note
            currentNote = note;
            
            // Update note content
            noteTitle.textContent = note.title;
            
            // Process note content to highlight keywords
            let processedContent = note.content || 'No content available';
            processedContent = processedContent.replace(/\*\*(.*?)\*\*/g, '<span class="keyword">$1</span>');
            
            noteContent.innerHTML = processedContent;
            
            // Navigate to note reading page
            subjectContent.classList.remove('active');
            noteReadingPage.classList.add('active');
        }

        function startQuiz(quiz) {
            // Set current quiz
            currentQuiz = quiz;
            currentQuestionIndex = 0;
            selectedAnswer = null;
            quizScore = 0;
            
            // Update quiz info
            totalQuestions.textContent = quiz.questions ? quiz.questions.length : 0;
            
            // Navigate to quiz interface
            subjectContent.classList.remove('active');
            quizInterface.classList.add('active');
            
            // Load first question
            loadQuestion();
        }

        function loadQuestion() {
            if (!currentQuiz || !currentQuiz.questions || currentQuestionIndex >= currentQuiz.questions.length) {
                return;
            }
            
            const question = currentQuiz.questions[currentQuestionIndex];
            
            // Update question number and progress
            currentQuestionNumber.textContent = currentQuestionIndex + 1;
            quizProgress.style.width = `${((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100}%`;
            
            // Update question text
            quizQuestion.textContent = question.question;
            
            // Clear options
            quizOptions.innerHTML = '';
            
            // Add options
            if (question.options && question.options.length > 0) {
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'quiz-option';
                    optionElement.textContent = option;
                    
                    optionElement.addEventListener('click', function() {
                        selectQuizOption(index);
                    });
                    
                    quizOptions.appendChild(optionElement);
                });
            } else {
                quizOptions.innerHTML = '<p>No options available for this question.</p>';
            }
            
            // Reset feedback
            quizFeedback.className = 'quiz-feedback';
            quizFeedback.textContent = '';
            
            // Update navigation buttons
            prevQuestion.disabled = currentQuestionIndex === 0;
            
            if (currentQuestionIndex === currentQuiz.questions.length - 1) {
                nextQuestion.textContent = 'Finish Quiz';
            } else {
                nextQuestion.textContent = 'Next';
            }
            
            // Reset selected answer
            selectedAnswer = null;
        }

        function selectQuizOption(optionIndex) {
            // Remove selected class from all options
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.classList.remove('selected');
            });
            
            // Add selected class to clicked option
            options[optionIndex].classList.add('selected');
            
            // Store selected answer
            selectedAnswer = optionIndex;
            
            // Enable next button if it's disabled
            nextQuestion.disabled = false;
        }

        function goToPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function goToNextQuestion() {
            if (selectedAnswer === null && currentQuestionIndex < currentQuiz.questions.length - 1) {
                showToast('Please select an answer before proceeding.', 'warning');
                return;
            }
            
            // Check answer if one is selected
            if (selectedAnswer !== null) {
                const question = currentQuiz.questions[currentQuestionIndex];
                const isCorrect = selectedAnswer === question.correctAnswer;
                
                // Show feedback
                if (isCorrect) {
                    quizFeedback.className = 'quiz-feedback correct';
                    quizFeedback.textContent = 'Correct!';
                    quizScore++;
                } else {
                    quizFeedback.className = 'quiz-feedback incorrect';
                    quizFeedback.textContent = 'Incorrect. The correct answer is: ' + question.options[question.correctAnswer];
                }
                
                // Highlight correct and incorrect answers
                const options = document.querySelectorAll('.quiz-option');
                options.forEach((option, index) => {
                    if (index === question.correctAnswer) {
                        option.classList.add('correct');
                    } else if (index === selectedAnswer && index !== question.correctAnswer) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Disable further selection
                options.forEach(option => {
                    option.style.pointerEvents = 'none';
                });
                
                // If this is the last question, change button text
                if (currentQuestionIndex === currentQuiz.questions.length - 1) {
                    nextQuestion.textContent = 'View Results';
                    nextQuestion.removeEventListener('click', goToNextQuestion);
                    nextQuestion.addEventListener('click', showQuizResults);
                    return;
                }
                
                // Wait a moment before proceeding to next question
                setTimeout(() => {
                    currentQuestionIndex++;
                    loadQuestion();
                }, 2000);
                
                return;
            }
            
            // If no answer selected, just go to next question
            if (currentQuestionIndex < currentQuiz.questions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showQuizResults();
            }
        }

        function showQuizResults() {
            // Calculate score
            const percentage = Math.round((quizScore / currentQuiz.questions.length) * 100);
            
            // Show results
            quizQuestion.textContent = `Quiz Complete!`;
            quizOptions.innerHTML = `
                <div class="card">
                    <h3>Your Score: ${quizScore}/${currentQuiz.questions.length} (${percentage}%)</h3>
                    <p>${percentage >= 70 ? 'Great job!' : 'Keep practicing!'}</p>
                </div>
            `;
            
            // Update navigation
            prevQuestion.style.display = 'none';
            nextQuestion.textContent = 'Back to Subjects';
            nextQuestion.removeEventListener('click', goToNextQuestion);
            nextQuestion.addEventListener('click', function() {
                quizInterface.classList.remove('active');
                subjectContent.classList.add('active');
            });
            
            // Hide feedback and progress
            quizFeedback.style.display = 'none';
            quizProgress.parentElement.style.display = 'none';
        }

        async function sendStudentMessage() {
            const subject = document.getElementById('messageSubject').value;
            const content = document.getElementById('messageContent').value;
            
            if (!subject || !content) {
                showToast('Please select a subject and enter your message.', 'warning');
                return;
            }
            
            try {
                // Send message to Firebase
                const messageData = {
                    subject: subject,
                    content: content,
                    grade: currentGrade,
                    timestamp: new Date().toISOString(),
                    status: 'unread'
                };
                
                await database.ref('student_messages').push(messageData);
                
                showToast('Your message has been sent to the teachers. Thank you!');
                
                // Clear the form
                document.getElementById('messageSubject').value = '';
                document.getElementById('messageContent').value = '';
                
            } catch (error) {
                console.error('Error sending message:', error);
                showToast('Error sending message. Please try again.', 'error');
            }
        }
    </script>
</body>
</html>
